---
  machine:
    node:
      version: 6.3.1
    environment:
  test:
    override:
      - npm run test
  deployment:
    release:
      branch: master
      commands:
        - grunt grunt-plugin
        - node ci/sync-plugin-version
        - node ci/tag
        - echo "//registry.npmjs.org/:_authToken=$NPM_AUTH_TOKEN" > ~/.npmrc
        - npm publish dist/build-tools/grunt-starlight
    beta:
      branch: beta
      commands:
        - grunt grunt-plugin
        - node ci/sync-plugin-version
        - node ci/tag
        - echo "//registry.npmjs.org/:_authToken=$NPM_AUTH_TOKEN" > ~/.npmrc
        - npm publish dist/build-tools/grunt-starlight --tag beta
